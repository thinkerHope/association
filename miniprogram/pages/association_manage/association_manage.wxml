<!--miniprogram/pages/association_manage/association_manage.wxml-->
<view class='containe'>
  <image class='about-banner' src="{{associationInfo.logo}}"></image>
  <!-- <van-button round type="info" color="#515151" size="small" bind:click="change_logo">更换logo</van-button> -->
  <van-tabs animated color="#515151" swipeable bind:change="onTabChange" active="{{tab}}">
    <van-tab title="简介" name="intruc">
      <view class="cu-list menu sm-border">
        <view
          class="cu-item {{item === 'academy' || item === 'type' ? '' : 'arrow'}}" 
          wx:for="{{keys}}" 
          wx:key="idx" 
          wx:for-item="item"
          bindtap="{{item === 'academy' || item === 'type' ? '' : 'editAssoInfo'}}"
          data-type="{{item === 'desc' ? 'text-area' : 'input'}}"
          data-value="{{associationInfo[item]}}"
          data-title="{{showName2Key[item]}}"
        >
          <view class="content">
            <text class="text-black">{{showName2Key[item]}}</text>
          </view>
          <view class="action">
            <text class="text-grey">{{associationInfo[item]}}</text>
          </view>
        </view>
      </view>
    </van-tab>
    <van-tab title="成员" name="mem">
      <van-panel title="活动成员" desc="可查看所有加入社团的成员信息(excel格式)" status="社团总人数:{{club_count}}" use-footer-slot>
        <view slot="footer">
          <van-button size="small" bind:click="downloadClubInfo"  color="#515151" plain hairline type="primary">查看信息</van-button>
        </view>
      </van-panel>
      <view wx:for="{{members}}" wx:for-item="item" data-index="{{index}}" wx:key='index' wx:for-index="bindex">
        <van-card desc="{{item.userClass}}" title="{{item.userName}}">
          <view slot="price-top" class="userclass">
            <van-tag size="medium" color="#fc7e2f" plain id="intitute">{{item.userInstitute}}</van-tag>
            <van-tag size="medium" color="#7232dd" plain>用户联系方式: {{item.userPhone}}</van-tag>
          </view>
          <view slot="footer">
            <van-button size="small" bind:click="exit_club" data-bindex='{{bindex}}' data-user-id="{{item.userId}}">移除社团</van-button>
          </view>
          <view slot="thumb">
            <van-image use-error-slot use-loading-slot round width="150rpx" lazy-load height="150rpx" src="{{item.userAvatar}}">
              <van-loading slot="loading" type="spinner" size="20" vertical />
              <text slot="error">加载失败</text>
            </van-image>
          </view>
        </van-card>
        <van-divider hairline />
      </view>
    </van-tab>
    <van-tab title="活动" name="act">
      <!-- <view class="text">向左滑动可删除活动</view> -->
      <van-panel title="向左滑动可删除活动" desc="可查看每个活动所有参与者的信息(excel格式)" ></van-panel>
      <view wx:for="{{act_array}}" wx:for-item="item" data-index="{{index}}" wx:key='index' wx:for-index="bindex">
        <van-swipe-cell data-bindex='{{bindex}}' data-act-id="{{item.activityId}}" right-width="{{ 65 }}" async-close bind:close="onClose1">
          <van-cell-group>
            <van-card centered lazy-load currency="截止时间: " price-class="price-class" price="{{item.activityEndtime}}" desc="{{item.activityDescribe}}" title="{{item.activityName}}" class="goods-card" thumb="{{item.activityCover}}">
              <view slot="price-top" >
                <van-button class="towButton" bind:click="getnew" color="#515151" data-bindex='{{bindex}}' data-act-id="{{item.activityId}}" plain hairline type="primary" size="mini">详情</van-button>
                 <van-button bind:click="downloadActInfo" color="#515151" data-bindex='{{bindex}}' data-act-id="{{item.activityId}}" plain hairline type="primary" size="mini">查看成员</van-button>
              </view>
            </van-card>
          </van-cell-group>
          <view slot="right" id="right" class="van-swipe-cell__right">移除</view>
        </van-swipe-cell>
      </view>
    </van-tab>
  </van-tabs>
  <view bindtap="addAct" wx:if="{{tab === 'act'}}">
    <image src="../../assets/images/zengjia.png" class="round-click"></image>
  </view>
</view>
<van-dialog id="van-dialog" />
<van-toast id="van-toast" />
<van-popup
  show="{{ showPopup }}"
  round
  position="bottom"
  custom-style="height: 20%"
  bind:close="onClose"
>

</van-popup>